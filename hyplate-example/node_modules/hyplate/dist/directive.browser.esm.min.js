import{w as o,b as n,f as t,n as e}from"./store-adc1c31e.js";import{w as s,m as c,d as l}from"./core-ca3c266f.js";const r=(o,t,e)=>c=>{const[r,[f,i,a],h]=s();c(f),c(i);const d=o=>l(i)(o);let u=!1,g=o.val,v=null;const p=n(o,(o=>{const n=!!o;u&&g===n||(u||(u=!0),g=n,v?.(),a(),[v]=n?t(d):e?.(d)??[null])}));return[()=>{p(),v?.(),r()},void 0,h]},f=[e,void 0,e],i=()=>f,a=({condition:n,children:t})=>t?r(n,t.then,t.else):o("Invalid usage of 'If'. Must provide children.",i),h=({when:n,children:t,fallback:e})=>t?r(n,t,e):o("Invalid usage of 'Show'. Must provide children.",i),d=({of:o,children:e})=>r=>{let f=[];const[i,[a,h,d],g]=s();r(a),r(h);const v=n(o,(o=>{const n=[];for(const t of o)n.push([t,void 0]);let s=0;const r=n.length;let i=f.length-1,a=r-1;for(s=0;s<=i&&s<=a;s++){const o=f[s],e=n[s];if(!t(o[0],e[0]))break;e[1]=o[1]}for(;s<=i&&s<=a;i--,a--){const o=f[i],e=n[a];if(!t(o[0],e[0]))break;e[1]=o[1]}if(s>i){if(s<=a){const o=n[a+1]?.[1]?.[2]()?.[1]??h;for(;s<=a;s++){const t=l(o),c=n[s];c[1]=e(c[0])(t)}}}else if(s>a)for(;s<=i;s++)f[s][1][0]();else{const o=s,t=s,r=new Map;for(s=o;s<=a;s++){const o=n[s][0];r.set(o,s)}let d,g=0;const v=a-t+1;let p=!1,m=0;const w=Array.from({length:v},(()=>0));for(s=o;s<=i;s++){const o=f[s];if(g>=v){o[1][0]();continue}const e=r.get(o[0]);null==e?o[1][0]():(w[e-t]=s+1,e>=m?m=e:p=!0,n[e][1]=o[1],g++)}const b=p?u(w):[];for(d=b.length-1,s=v-1;s>=0;s--){const o=t+s,r=n[o],f=n[o+1]?.[1][2]()?.[0]??h,i=l(f);if(0===w[s])r[1]=e(r[0])(i);else if(p)if(d<0||s!==b[d]){const o=r[1][2]();o&&c(...o)(i)}else d--}}f=n}));return[()=>{v(),d(),i()},void 0,g]},u=o=>{const n=[...o],t=[0];let e,s,c,l,r;const f=o.length;for(e=0;e<f;e++){const f=o[e];if(0!==f){if(s=t[t.length-1],o[s]<f){n[e]=s,t.push(e);continue}for(c=0,l=t.length-1;c<l;)r=c+l>>1,o[t[r]]<f?c=r+1:l=r;f<o[t[c]]&&(c>0&&(n[e]=t[c-1]),t[c]=e)}}for(c=t.length,l=t[c-1];c-- >0;)t[c]=l,l=n[l];return t};export{d as For,a as If,h as Show};
